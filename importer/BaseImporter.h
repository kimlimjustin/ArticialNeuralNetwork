//-------------------------------------------------------------
//【文件名】BaseImporter.h
//【功能模块和目的】神经网络模型导入基类声明
//【开发者及日期】林钲凯 2025-07-27
//【更改记录】
//-------------------------------------------------------------

#ifndef BASE_IMPORTER_H
#define BASE_IMPORTER_H

#include "../model/Network.h"
#include <memory>
#include <string>

//-------------------------------------------------------------
//【类名】BaseImporter
//【功能】神经网络模型导入抽象基类
//【说明】支持多种文件格式的导入扩展
//【开发者及日期】林钲凯 2025-07-27
//【更改记录】
//-------------------------------------------------------------
class BaseImporter {
public:
    //-------------------------------------------------------------
    //【函数名称】~BaseImporter
    //【函数功能】虚析构函数
    //【参数】无
    //【返回值】无
    //【开发者及日期】林钲凯 2025-07-27
    //【更改记录】
    //-------------------------------------------------------------
    virtual ~BaseImporter() = default;
    
    //-------------------------------------------------------------
    //【函数名称】importNetwork
    //【函数功能】从文件导入神经网络
    //【参数】
    //  - const std::string& filename：要导入的文件路径
    //【返回值】
    //  - std::unique_ptr<Network>：导入的网络的唯一指针，导入失败时为nullptr
    //【开发者及日期】林钲凯 2025-07-27
    //【更改记录】
    //-------------------------------------------------------------
    virtual std::unique_ptr<Network> importNetwork(const std::string& filename) = 0;
    
    //-------------------------------------------------------------
    //【函数名称】getSupportedExtensions
    //【函数功能】获取支持的文件扩展名
    //【返回值】
    //  - std::string：支持的文件扩展名字符串（例如：".ann"）
    //【开发者及日期】林钲凯 2025-07-27
    //【更改记录】
    //-------------------------------------------------------------
    virtual std::string getSupportedExtensions() const = 0;
    
    //-------------------------------------------------------------
    //【函数名称】getImporterName
    //【函数功能】获取导入器名称/描述
    //【返回值】
    //  - std::string：描述导入器的字符串
    //【开发者及日期】林钲凯 2025-07-27
    //【更改记录】
    //-------------------------------------------------------------
    virtual std::string getImporterName() const = 0;
    
    //-------------------------------------------------------------
    //【函数名称】isFormatSupported
    //【函数功能】检查文件格式是否受支持
    //【参数】
    //  - const std::string& filename：要检查的文件路径
    //【返回值】
    //  - bool：格式是否受支持
    //【开发者及日期】林钲凯 2025-07-27
    //【更改记录】
    //-------------------------------------------------------------
    virtual bool isFormatSupported(const std::string& filename) const;

protected:
    //-------------------------------------------------------------
    //【函数名称】getFileExtension
    //【函数功能】从文件名中提取文件扩展名
    //【参数】
    //  - const std::string& filename：文件路径
    //【返回值】
    //  - std::string：小写的文件扩展名
    //【开发者及日期】林钲凯 2025-07-27
    //【更改记录】
    //-------------------------------------------------------------
    std::string getFileExtension(const std::string& filename) const;
    
    //-------------------------------------------------------------
    //【函数名称】validateImportedNetwork
    //【函数功能】验证导入的神经网络
    //【参数】
    //  - const Network* network：要验证的网络
    //【返回值】
    //  - bool：网络是否有效
    //【开发者及日期】林钲凯 2025-07-27
    //【更改记录】
    //-------------------------------------------------------------
    bool validateImportedNetwork(const Network* network) const;
};

#endif // BASE_IMPORTER_H
