//-------------------------------------------------------------
//【文件名】Synapse.h
//【功能模块和目的】神经元之间突触连接的声明
//【开发者及日期】林钲凯 2025-07-27
//【更改记录】
//-------------------------------------------------------------

#ifndef SYNAPSE_H
#define SYNAPSE_H

class Neuron; // Forward declaration

//-------------------------------------------------------------
//【类名】Synapse
//【功能】表示两个神经元之间的突触连接，支持信号加权传递
//【说明】可表示树突（可变权重）和轴突（权重为1）
//【开发者及日期】林钲凯 2025-07-27
//【更改记录】
//-------------------------------------------------------------
class Synapse {
private:
    double m_weight;
    Neuron* m_sourceNeuron;
    Neuron* m_targetNeuron;
    bool m_isAxon;
public:
    //-------------------------------------------------------------
    //【函数名称】Synapse
    //【函数功能】突触构造函数
    //【参数】weight：初始权重，sourceNeuron：源神经元指针，targetNeuron：目标神经元指针，isAxon：是否为轴突
    //【返回值】无
    //【开发者及日期】林钲凯 2025-07-27
    //【更改记录】
    //-------------------------------------------------------------
    Synapse(double weight = 1.0, Neuron* sourceNeuron = nullptr, Neuron* targetNeuron = nullptr, bool isAxon = false);
    //-------------------------------------------------------------
    //【函数名称】Synapse（拷贝构造）
    //【函数功能】拷贝构造函数
    //【参数】other：被拷贝的突触
    //【返回值】无
    //【开发者及日期】林钲凯 2025-07-27
    //【更改记录】
    //-------------------------------------------------------------
    Synapse(const Synapse& other);
    //-------------------------------------------------------------
    //【函数名称】operator=
    //【函数功能】赋值运算符重载
    //【参数】other：赋值来源突触
    //【返回值】Synapse&，自身引用
    //【开发者及日期】林钲凯 2025-07-27
    //【更改记录】
    //-------------------------------------------------------------
    Synapse& operator=(const Synapse& other);
    //-------------------------------------------------------------
    //【函数名称】~Synapse
    //【函数功能】析构函数
    //【参数】无
    //【返回值】无
    //【开发者及日期】林钲凯 2025-07-27
    //【更改记录】
    //-------------------------------------------------------------
    ~Synapse();
    //-------------------------------------------------------------
    //【函数名称】getWeight
    //【函数功能】获取突触权重
    //【参数】无
    //【返回值】double，当前权重
    //【开发者及日期】林钲凯 2025-07-27
    //【更改记录】
    //-------------------------------------------------------------
    double getWeight() const;
    //-------------------------------------------------------------
    //【函数名称】setWeight
    //【函数功能】设置突触权重（仅树突可变）
    //【参数】weight：新权重
    //【返回值】无
    //【开发者及日期】林钲凯 2025-07-27
    //【更改记录】
    //-------------------------------------------------------------
    void setWeight(double weight);
    //-------------------------------------------------------------
    //【函数名称】getSourceNeuron
    //【函数功能】获取源神经元指针
    //【参数】无
    //【返回值】Neuron*，源神经元
    //【开发者及日期】林钲凯 2025-07-27
    //【更改记录】
    //-------------------------------------------------------------
    Neuron* getSourceNeuron() const;
    //-------------------------------------------------------------
    //【函数名称】getTargetNeuron
    //【函数功能】获取目标神经元指针
    //【参数】无
    //【返回值】Neuron*，目标神经元
    //【开发者及日期】林钲凯 2025-07-27
    //【更改记录】
    //-------------------------------------------------------------
    Neuron* getTargetNeuron() const;
    //-------------------------------------------------------------
    //【函数名称】setSourceNeuron
    //【函数功能】设置源神经元指针
    //【参数】neuron：源神经元指针
    //【返回值】无
    //【开发者及日期】林钲凯 2025-07-27
    //【更改记录】
    //-------------------------------------------------------------
    void setSourceNeuron(Neuron* neuron);
    //-------------------------------------------------------------
    //【函数名称】setTargetNeuron
    //【函数功能】设置目标神经元指针
    //【参数】neuron：目标神经元指针
    //【返回值】无
    //【开发者及日期】林钲凯 2025-07-27
    //【更改记录】
    //-------------------------------------------------------------
    void setTargetNeuron(Neuron* neuron);
    //-------------------------------------------------------------
    //【函数名称】isAxon
    //【函数功能】判断是否为轴突
    //【参数】无
    //【返回值】bool，是否为轴突
    //【开发者及日期】林钲凯 2025-07-27
    //【更改记录】
    //-------------------------------------------------------------
    bool isAxon() const;
    //-------------------------------------------------------------
    //【函数名称】transmit
    //【函数功能】信号加权传递
    //【参数】input：输入信号
    //【返回值】double，输出信号（input*weight）
    //【开发者及日期】林钲凯 2025-07-27
    //【更改记录】
    //-------------------------------------------------------------
    double transmit(double input) const;
    //-------------------------------------------------------------
    //【函数名称】isValid
    //【函数功能】判断突触连接是否合法
    //【参数】无
    //【返回值】bool，连接是否合法
    //【开发者及日期】林钲凯 2025-07-27
    //【更改记录】
    //-------------------------------------------------------------
    bool isValid() const;
};

#endif // SYNAPSE_H
